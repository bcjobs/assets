(function(){var d=Backbone.View.extend({el:$('[data-section="search"]')[0],initialize:function(e){this.featuredEmployersView=e.featuredEmployersView;this.allEmployersView=e.allEmployersView;this.term=this.$('input[type="search"]').val();this.activeJobsOnly=this.$('[data-element="active-only-checkbox"]').hasClass("checked");this.filter()},events:{'change input[type="search"]':"onTermChange",'keyup input[type="search"]':"onTermChange",'click [data-action="toggle-active-jobs"]':"onToggleActiveJobsClick"},onTermChange:function(f){var g=$(f.currentTarget).val().trim();if(this.term==g){return}this.term=g;this.featuredEmployersView.filter(this.term);this.filter()},onToggleActiveJobsClick:function(f){this.activeJobsOnly=$(f.currentTarget).find('[data-element="active-only-checkbox"]').toggleClass("checked").hasClass("checked");this.filter()},filter:function(){this.featuredEmployersView.filter(this.term,this.activeJobsOnly?1:0);this.allEmployersView.filter(this.term,this.activeJobsOnly?1:0)}});var c=Backbone.View.extend({escapeRegex:function(g){var e=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"];var f=new RegExp("(\\"+e.join("|\\")+")","g");return g.replace(f,"\\$1")},generateRegex:function(g){var e=this.escapeRegex(g).split(" ");var f="^(?=.*?"+e.join(")(?=.*?")+").*$";return new RegExp(f,"i")},initialize:function(){var e=this;this.rows=[];this.$el.children().each(function(){e.rows.push({element:this,text:$(this).text().replace(/\s\s+/g," "),jobCount:parseInt($(this).data("job-count"),10)})})},filter:function(j,e){var h=this.generateRegex(j);var f=[];for(var g=0;g<this.rows.length;g++){if(h.test(this.rows[g].text)&&this.rows[g].jobCount>=e){f.push(this.rows[g].element)}}this.$el.empty();this.$el.append(f)}});var b=c.extend({el:$('[data-section="featured"]')});var a=c.extend({el:$('[data-section="all"]')});new d({featuredEmployersView:new b(),allEmployersView:new a()})}());